---
title: "Prospector ZMK Dongleã®ã‚¿ãƒƒãƒæ©Ÿèƒ½ã‚’ä½¿ã†"
emoji: "ğŸ‘†"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["zmk"]
published: true
---

# èƒŒæ™¯

Prospectorã¯ã€ZMKã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼æƒ…å ±ã‚„peripheralã®ãƒãƒƒãƒ†ãƒªãƒ¼æ®‹é‡ãªã©ã‚’ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã«è¡¨ç¤ºã§ãã‚‹ãƒ‡ãƒã‚¤ã‚¹ã§ã™ã€‚
https://github.com/carrefinho/prospector

æœ€è¿‘ã€ã“ã‚Œã®çµ„ã¿ç«‹ã¦ã‚­ãƒƒãƒˆ/å®Œæˆå“ãŒbeekeeb.jpã§æ‰‹è»½ã«å…¥æ‰‹ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§ã€ã“ã‚Œã‚’ãã£ã‹ã‘ã«ç­†è€…ã‚‚Prospectorã‚’å…¥æ‰‹ã—ã¾ã—ãŸã€‚

https://shop.beekeeb.jp/products/zmk-wireless-dongle-prospector-diy-kit


æœ¬å®¶GitHubã®READMEã‚’è¦‹ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ã„ã¦ã‚ã‚Šã¾ã™ã€‚

> Waveshare 1.69inch Round LCD Display Module **with Touch**
> Non-touch version has different mounting pattern and will **NOT** fit

æ—¥æœ¬èªè¨³:
> Waveshare 1.69inch Round LCD Display Module **ã‚¿ãƒƒãƒä»˜ã**
> ã‚¿ãƒƒãƒãªã—ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯åˆ¥ã®å–ã‚Šä»˜ã‘ãƒ‘ã‚¿ãƒ¼ãƒ³ãªã®ã§ã€**è£…ç€ã§ãã¾ã›ã‚“**

ä½¿ç”¨ã•ã‚Œã¦ã„ãªã„ãŒã€ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢çš„ã«ã¯ã‚¿ãƒƒãƒæ©Ÿèƒ½ãŒã¤ã„ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚ã‚¿ãƒƒãƒãŒã§ãã‚Œã°ã„ã‚ã„ã‚éŠã¹ã‚‹ã ã‚ã†ã—ã€åº•é¢ã«ã‚ã‚‹ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ãŒæŠ¼ã—ã«ãã„ã®ã‚‚è§£æ±ºã—ãã†ã§ã™ã€‚ã¨ã„ã†ã‚ã‘ã§ã€ã‚„ã£ã¦ã¿ã¾ã—ãŸã€‚

# é…ç·šãƒ»ã¯ã‚“ã ä»˜ã‘

ã‚¿ãƒƒãƒæ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ã¯ã‚¿ãƒƒãƒãƒ‘ãƒãƒ«ç”¨ã®ãƒ”ãƒ³ã®é…ç·šãŒå¿…è¦ã§ã™ãŒã€æœ¬å®¶ã®Prospectorã§ã¯é…ç·šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã“ã®è¨˜äº‹ã§ã¯ã€ä»¥ä¸‹ã®ç”»åƒã®ã‚ˆã†ã«é…ç·šã—ã¾ã—ãŸã€‚ä¸‹4æœ¬ã®æ‰‹æ›¸ãã§ç·šã‚’è¿½åŠ ã—ã¦ã„ã‚‹`TP_`ã§å§‹ã¾ã‚‹ãƒ”ãƒ³ãŒã‚¿ãƒƒãƒç”¨ã®ãƒ”ãƒ³ã§ã™ã€‚

![](https://storage.googleapis.com/zenn-user-upload/0e63e5252ded-20251109.png)

(ç”»åƒã¯[æœ¬å®¶ã®çµ„ã¿ç«‹ã¦ãƒãƒ‹ãƒ¥ã‚¢ãƒ«](https://github.com/carrefinho/prospector/blob/main/docs/prospector_assembly_manual.jpg) ã«2025/11/09ã«æ‰‹æ›¸ãã§æ›¸ãåŠ ãˆãŸã‚‚ã®ã§ã™ã€‚)

:::message
**2025/11/17ä»¥é™ã«beekeeb.jpã§è³¼å…¥ã—ãŸå ´åˆã¯ã€ã‚¿ãƒƒãƒãƒ‘ãƒãƒ«ç”¨ã®ãƒ”ãƒ³ã®é…ç·šãŒã•ã‚Œã¦ã„ã¾ã™ã€‚** ãã‚Œä»¥å‰ã«è³¼å…¥ã—ãŸå ´åˆã¯ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆç‰ˆã®PCBã‚’é€ã£ã¦ã‚‚ã‚‰ãˆã¾ã™(è©³ç´°ã¯[ã“ã¡ã‚‰](https://x.com/beekeeb_jp/status/1990332493757841570))ã€‚ã‚ã‚ŠãŒãŸã™ãã‚‹â€¦ã€‚
:::

https://x.com/beekeeb_jp/status/1990316922697859346


æ›´æ–°å‰ã®beekeeb.jpã®PCBã«æ‰‹å‹•ã§é…ç·šã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚å®Ÿéš›ã«é…ç·šã—ãŸå†™çœŸã¯ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ã€‚(ã“ã¡ã‚‰ã®å†™çœŸã¯ãŠãã•ã‚“ã‹ã‚‰ãŠå€Ÿã‚Šã—ã¾ã—ãŸ[[ãƒªãƒ³ã‚¯](https://x.com/ogu_key/status/1987696836342349878)]ã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ğŸ™)

![](https://storage.googleapis.com/zenn-user-upload/eaf071f36a21-20251110.png)

# ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã®æ›¸ãæ›ãˆ

ä»Šå›ã¯Prospector Scannerã¨ã„ã†ã€Prospectorã‚’ç‹¬ç«‹ã—ãŸãƒ‡ãƒã‚¤ã‚¹ã¨ã—ã¦ç°¡å˜ã«ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ã—ãŸãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã‚’ç”¨ã„ã¾ã™ã€‚

https://github.com/t-ogura/zmk-config-prospector

Prospector Scannerã®ä½¿ç”¨æ–¹æ³•ã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

https://note.com/heace/n/n4cbf41ef1c57

:::message
Prospector Scannerã®v2.0.0ä»¥é™ã§ã¯ã€ã‚¿ãƒƒãƒã«ã‚ˆã‚‹Prospectorã®GUIæ“ä½œæ©Ÿèƒ½ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚è©³ç´°: https://note.com/heace/n/nacf15365304c

v2.0.0ä»¥é™ã®ã‚¿ãƒƒãƒæ©Ÿèƒ½ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€ã“ã®è¨˜äº‹ã®ä»¥ä¸‹ã®å¤‰æ›´ã¯ä¸è¦ã§ã™ã€‚
:::

ä»¥ä¸‹ã§ç´¹ä»‹ã—ã¦ã„ã‚‹å¤‰æ›´ã¯[ã“ã¡ã‚‰ã®ãƒªãƒã‚¸ãƒˆãƒªã®`trackpad`ãƒ–ãƒ©ãƒ³ãƒ](https://github.com/kot149/zmk-config-prospector-scanner/tree/trackpad)ã«å…¨ã¦åæ˜ ã•ã‚Œã¦ã„ã¾ã™ã€‚

https://github.com/kot149/zmk-config-prospector-scanner/tree/trackpad

## æ—¢å­˜ã®I2Cã®è¨­å®šã®å‰Šé™¤

`config/boards/seeeduino_xiao_ble.overlay`ã«I2Cã®è¨­å®šãŒã‚ã‚Šã¾ã™ãŒã€ã“ã‚Œã¯æœ¬å®¶Prospectorã«ã¯ãªã„ã‚‚ã®ã§ã€ä½¿ã‚ã‚Œã¦ã„ã‚‹ã®ã‹ã©ã†ã‹ãƒ»å‹•ä½œã™ã‚‹ã®ã‹ã©ã†ã‹ã‚ˆãåˆ†ã‹ã‚‰ãªã„ã€å‰Šé™¤ã—ã¦ã‚‚å•é¡Œãªã„ã‚ˆã†ã«è¦‹ãˆãŸã®ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«ã”ã¨å‰Šé™¤ã—ã¾ã—ãŸã€‚

## ã‚¿ãƒƒãƒã‚»ãƒ³ã‚µãƒ¼ã®ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã®è¨­å®š

Waveshare 1.69inch Round LCD Display Moduleã¯ã€ã‚¿ãƒƒãƒã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã«Hynitron CST816Sã‚’ç”¨ã„ã¦ã„ã¾ã™ã€‚å¹¸ã„ãªã“ã¨ã«ã€[Zephyrã«CST816Sã®ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹](https://docs.zephyrproject.org/latest/build/dts/api/bindings/input/hynitron%2Ccst816s.html)ã®ã§ã€ã“ã‚Œã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```dts:config/prospector_scanner.overlay
&i2c0 {
   status = "okay";
    touch_sensor: cst816s@15 {
        compatible = "hynitron,cst816s";
        reg = <0x15>;
        status = "okay";
        irq-gpios = <&gpio0 2 GPIO_ACTIVE_LOW>;   // D0 = P0.02
        rst-gpios = <&gpio0 3 GPIO_ACTIVE_LOW>;   // D1 = P0.03
    };
};

/ {
    touch_listener: touch_listener {
        status = "okay";
        compatible = "zmk,input-listener";
        device = <&touch_sensor>;
    };
};
```

```Kconfig:config/prospector_scanner.conf
CONFIG_INPUT=y
CONFIG_ZMK_POINTING=y
CONFIG_INPUT_CST816S=y
CONFIG_INPUT_CST816S_INTERRUPT=y
```

:::message
2025/11/14ã¾ã§ã€ä¸Šè¨˜IRQã¨RSTã®ãƒ”ãƒ³ãŒé€†ã«ãªã£ãŸçŠ¶æ…‹ã§è¨˜è¼‰ã—ã¦ã„ã¾ã—ãŸã€‚ç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ã€‚ç¾åœ¨ã¯ä¿®æ­£æ¸ˆã¿ã§ã™ã€‚
:::

ã“ã‚Œã§ã€ã‚¿ãƒƒãƒã‚»ãƒ³ã‚µãƒ¼ã®å…¥åŠ›ãŒèª­ã¿å–ã‚‰ã‚Œã€å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºè¡Œã•ã‚Œã¾ã™ã€‚[ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰](https://github.com/zephyrproject-rtos/zephyr/blob/v3.5-branch/drivers/input/input_cst816s.c)ã‚’è¦‹ã‚‹ã¨ã€å…·ä½“çš„ã«ã¯ä»¥ä¸‹ã®å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºè¡Œã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™[^1]ã€‚

[^1]: æœ€æ–°ã®ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã§ã¯ã“ã®ä»–ã«ã‚‚CST816SãŒèªè­˜ã—ãŸã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã‚’ãƒ‡ãƒã‚¤ã‚¹å›ºæœ‰ã®å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆã¨ã—ã¦å ±å‘Šã™ã‚‹æ©Ÿèƒ½ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ãŒã€2025/11/10æ™‚ç‚¹ã§ZMKãŒä½¿ç”¨ã—ã¦ã„ã‚‹Zephyr v3.5ã«ã¯ãã‚ŒãŒå«ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

- `INPUT_BTN_TOUCH`: ç”»é¢ã®ã‚¿ãƒƒãƒ
- `INPUT_ABS_X`: ã‚¿ãƒƒãƒã—ãŸxã®çµ¶å¯¾åº§æ¨™
- `INPUT_ABS_Y`: ã‚¿ãƒƒãƒã—ãŸyã®çµ¶å¯¾åº§æ¨™

ã“ã‚Œã‚‰ã¯ZMKã®æ¨™æº–æ©Ÿèƒ½ã§ç›´æ¥æ‰±ãˆãªã„ã®ã§ã€ä½•ã‹ã—ã‚‰å¤‰æ›ã‚’ã‹ã¾ã™ã‹ã€ã¾ãŸã¯ãã‚Œã‚‰ã‚’ç›´æ¥æ‰±ãˆã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

## ãƒã‚¦ã‚¹ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•ãŒã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹

ä»¥ä¸‹ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«å«ã¾ã‚Œã¦ã„ã‚‹ã€`INPUT_ABS_X`ãƒ»`INPUT_ABS_Y`(çµ¶å¯¾åº§æ¨™)ã‚’`INPUT_REL_X`ãƒ»`INPUT_REL_Y`(ç›¸å¯¾åº§æ¨™)ã«å¤‰æ›ã™ã‚‹Input Processorã‚’ç”¨ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã£ã¦ã€ZMKã§ãƒã‚¦ã‚¹ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•ã¨ã—ã¦ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

https://github.com/halfdane/zmk-input-processors


ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•ã—ã¦ã„ã‚‹æ§˜å­:

https://x.com/kot149_/status/1987391202220810277?s=20

```yml:config/west.yml
  remotes:
    - name: halfdane
      url-base: https://github.com/halfdane
  projects:
    # https://github.com/halfdane/zmk-input-processors
    - name: zmk-input-processors
      remote: halfdane
      revision: main
      path: modules/zmk-input-processors
```

```dts:config/prospector_scanner.keymap
#include <input/processors.dtsi>
#include <dt-bindings/zmk/input_transform.h>
#include <zephyr/dt-bindings/input/input-event-codes.h>

#include <behaviors/input_processor_gestures.dtsi>
#include <behaviors/input_processor_absolute_to_relative.dtsi>

&touch_listener {
    input-processors = <
        &zip_absolute_to_relative
        &zip_xy_transform (INPUT_TRANSFORM_XY_SWAP | INPUT_TRANSFORM_Y_INVERT)
        &zip_xy_scaler 4 1
    >;
};
```

Prospectorã¯ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚’90Â°å›è»¢ã—ã¦ä½¿ç”¨ã—ã¦ã„ã‚‹ã®ã§ã€`&zip_xy_transform`ã§è£œæ­£ã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã€CPIãŒå°ã•ã‹ã£ãŸã®ã§ã€`&zip_xy_scaler`ã§4å€ã«ã—ã¦ã„ã¾ã™ã€‚
ã“ã®è¾ºã«ã¤ã„ã¦ã¯ã€ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚

https://zenn.dev/kot149/articles/zmk-input-processor-cheat-sheet

## ã‚¿ãƒƒãƒ—ã§ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹

zmk-input-gesturesãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ç”¨ã„ã¾ã™ã€‚

https://github.com/halfdane/zmk-input-gestures

ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€`INPUT_ABS_X`ãƒ»`INPUT_ABS_Y`(çµ¶å¯¾åº§æ¨™)ã‚’èª­ã¿å–ã£ã¦ã€ã‚¿ãƒƒãƒ—ã§ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã€ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•ã«æ…£æ€§ã‚’ã¤ã‘ã‚‹ãªã©ã®ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰å‘ã‘ã®ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã‚’è¡Œã£ã¦ãã‚Œã¾ã™ã€‚

```Kconfig:config/prospector_scanner.conf
CONFIG_MAIN_STACK_SIZE=4096
CONFIG_INPUT_THREAD_STACK_SIZE=4096
```

```yml:config/west.yml
  projects:
    # https://github.com/halfdane/zmk-input-gestures
    - name: zmk-input-gestures
      remote: halfdane
      revision: main
      path: modules/zmk-input-gestures
```

```dts:config/prospector_scanner.keymap
#include <input/processors.dtsi>
#include <dt-bindings/zmk/input_transform.h>
#include <zephyr/dt-bindings/input/input-event-codes.h>

#include <behaviors/input_processor_gestures.dtsi>
#include <behaviors/input_processor_absolute_to_relative.dtsi>
#include <behaviors/input_processor_gestures.dtsi>

// Alias &touch_sensor to &glidepoint for input gestures module
glidepoint: &touch_sensor {};

&zip_gestures {
    tap-detection;
    tap-timout-ms = <150>;
    prevent_movement_during_tap;
};

&touch_listener {
    input-processors = <
        &zip_gestures
        &zip_absolute_to_relative
        &zip_xy_transform (INPUT_TRANSFORM_XY_SWAP | INPUT_TRANSFORM_Y_INVERT)
        &zip_xy_scaler 4 1
    >;
};
```

å…ƒã€…ã¯Cirque GlidePointã¨ã„ã†ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰å‘ã‘ã«ä½œã‚‰ã‚ŒãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã€`&glidepoint`ã¨ã„ã†ãƒ©ãƒ™ãƒ«ãŒãƒ‡ãƒã‚¤ã‚¹ã«ã¤ã„ã¦ã„ãªã„ã¨ãƒ“ãƒ«ãƒ‰ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ãªã®ã§ã€`&touch_sensor`ã«`&glidepoint`ã¨ã„ã†ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ã¤ã‘ã¦ã‚ã‚Šã¾ã™ã€‚

ã“ã‚Œã§ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨ã‚¯ãƒªãƒƒã‚¯ãŒå…¥åŠ›ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã‚‚å¯èƒ½ã§ã™ã€‚å·¦ã‚¯ãƒªãƒƒã‚¯ãƒ»ä¸­å¤®ã‚¯ãƒªãƒƒã‚¯ã‚„ã€ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã¯ã§ãã¾ã›ã‚“ã€‚

## ãƒã‚¦ã‚¹ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã‚’å°å…¥ã™ã‚‹

zmk-mouse-gestureãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ç”¨ã„ã¾ã™ã€‚

https://github.com/kot149/zmk-mouse-gesture

ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã€4æ–¹å‘ã®ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•ã®çµ„ã¿åˆã‚ã›ã‚’ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã¨ã—ã¦èªè­˜ã—ã€è¨­å®šã—ãŸã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’ç™ºè¡Œã—ã¦ãã‚Œã¾ã™ã€‚
ã“ã‚Œã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€Prospectorã®æŠ¼ã—ã«ãã„ä½ç½®ã«ã‚ã‚‹ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ã®ä»£ã‚ã‚Šã«ã€ã‚¿ãƒƒãƒç”»é¢ã®ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã§bootloaderã‚’èµ·å‹•ã™ã‚‹ã¨ã„ã£ãŸã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

ãªãŠã€Prospectorã«ã¯ã‚­ãƒ¼ãŒãªã„ã®ã§ã€ã‚­ãƒ¼ã‚’æŠ¼ã•ãªãã¦ã‚‚ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã‚’æœ‰åŠ¹åŒ–ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ãŸã‚ã«ã€[ã‚ªãƒ¼ãƒˆãƒã‚¦ã‚¹ãƒ¬ã‚¤ãƒ¤ãƒ¼](https://zenn.dev/kot149/articles/zmk-auto-mouse-layer)ã¨zmk-listenersã‚’çµ„ã¿åˆã‚ã›ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€
1. ãƒ¬ã‚¤ãƒ¤ãƒ¼1ã‚’è¿½åŠ ã™ã‚‹
2. ã‚ªãƒ¼ãƒˆãƒã‚¦ã‚¹ãƒ¬ã‚¤ãƒ¤ãƒ¼(`&zip_temp_layer`)ã§ã€ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•ãŒå§‹ã¾ã£ãŸã‚‰è‡ªå‹•çš„ã«ãƒ¬ã‚¤ãƒ¤ãƒ¼1ã‚’æœ‰åŠ¹ã«ã—ã€200mså¾Œã«ç„¡åŠ¹ã«ã™ã‚‹
3. zmk-listenersã‚’ä½¿ã£ã¦ã€ãƒ¬ã‚¤ãƒ¤ãƒ¼1ãŒæœ‰åŠ¹ã«ãªã£ãŸã¨ãã«`&mouse_gesture_on`ã€ç„¡åŠ¹ã«ãªã£ãŸã¨ãã«`&mouse_gesture_off`ã‚’å®Ÿè¡Œã™ã‚‹

ã¨ã„ã†ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚

```yml:config/west.yml
  remotes:
    - name: ssbb
      url-base: https://github.com/ssbb
    - name: kot149
      url-base: https://github.com/kot149
  projects:
    # https://github.com/ssbb/zmk-listeners
    - name: zmk-listeners
      remote: ssbb
      revision: v1
      path: modules/zmk-listeners
    # https://github.com/kot149/zmk-mouse-gesture
    - name: zmk-mouse-gesture
      remote: kot149
      revision: v1
      path: modules/zmk-mouse-gesture
```

```dts:config/prospector_scanner.keymap
#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/outputs.h>
#include <dt-bindings/zmk/pointing.h>

/ {
    keymap {
        compatible = "zmk,keymap";

        default_layer {
            bindings = <&none>;
        };

        mouse_layer {
            bindings = <&none>;
        };
    };

    layer_listeners {
        compatible = "zmk,layer-listeners";

        mouse_gesture {
            layers = <1>;
            bindings = <&mouse_gesture_on &mouse_gesture_off>;
        };
    };
};

#include <input/processors.dtsi>
#include <dt-bindings/zmk/input_transform.h>
#include <zephyr/dt-bindings/input/input-event-codes.h>

#include <behaviors/input_processor_absolute_to_relative.dtsi>

#include <mouse-gesture.dtsi>

&zip_mouse_gesture {
    stroke-size = <150>;
    enable-eager-mode;
    idle-timeout-ms = <200>;

    bootloader {
        pattern = <GESTURE_DOWN GESTURE_RIGHT GESTURE_UP>;
        bindings = <&bootloader>;
    };
};

&touch_listener {
    input-processors = <
        &zip_absolute_to_relative
        &zip_xy_transform (INPUT_TRANSFORM_XY_SWAP | INPUT_TRANSFORM_Y_INVERT)
        &zip_xy_scaler 4 1
        &zip_temp_layer 1 200
        &zip_mouse_gesture
    >;
};
```

â†“, â†’, â†‘ã®é †ã§ã‚¹ãƒ¯ã‚¤ãƒ—ã—ãŸã‚‰bootloaderã‚’èµ·å‹•ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚

# ä»Šå¾Œã®å±•æœ›

- å·¦ã‚¯ãƒªãƒƒã‚¯ãƒ»ä¸­å¤®ã‚¯ãƒªãƒƒã‚¯ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
- ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
- ã‚¿ãƒƒãƒ—ã§ã‚­ãƒ¼å…¥åŠ›ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
- ãƒ€ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
- CST816Så´ã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼æ©Ÿèƒ½ã®æ´»ç”¨
- ~~ã‚¿ãƒƒãƒã¾ãŸã¯ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã§Prospector Scannerã®GUIæ“ä½œ~~
  - Prospector Scannerã®v2.0.0ã§ã€ã‚¿ãƒƒãƒã«ã‚ˆã‚‹Prospectorã®GUIæ“ä½œæ©Ÿèƒ½ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚è©³ç´°: https://note.com/heace/n/nacf15365304c

ãªã©ãªã©ã€è‰²ã€…ã‚„ã‚Œã‚‹ã“ã¨ã¯å¤šãã†ã§ã™ã€‚æ°—ãŒå‘ã„ãŸã‚‰ã‚„ã£ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚ã‚„ã£ãŸã‚‰ã“ã®è¨˜äº‹ã«è¿½è¨˜ã—ã¾ã™ã€‚
